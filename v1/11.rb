#### In the 20×20 grid below, four numbers along a diagonal line have been marked in red.

#### 08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08
#### 49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00
#### 81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65
#### 52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91
#### 22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80
#### 24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50
#### 32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70
#### 67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21
#### 24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72
#### 21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95
#### 78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92
#### 16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57
#### 86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58
#### 19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40
#### 04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66
#### 88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69
#### 04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36
#### 20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16
#### 20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54
#### 01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48

####The product of these numbers is 26 × 63 × 78 × 14 = 1788696.
####
####What is the greatest product of four adjacent numbers in the same direction (up, down, left, right, or diagonally) in the 20×20 grid?

data = {
    '1' => {
        '1' => '08',
        '2' => '02',
        '3' => '22',
        '4' => '97',
        '5' => '38',
        '6' => '15',
        '7' => '00',
        '8' => '40',
        '9' => '00',
        '10' => '75',
        '11' => '04',
        '12' => '05',
        '13' => '07',
        '14' => '78',
        '15' => '52',
        '16' => '12',
        '17' => '50',
        '18' => '77',
        '19' => '91',
        '20' => '08'
    },
    '2' => {
        '1' => '49',
        '2' => '49',
        '3' => '99',
        '4' => '40',
        '5' => '17',
        '6' => '81',
        '7' => '18',
        '8' => '57',
        '9' => '60',
        '10' => '87',
        '11' => '17',
        '12' => '40',
        '13' => '98',
        '14' => '43',
        '15' => '69',
        '16' => '48',
        '17' => '04',
        '18' => '56',
        '19' => '62',
        '20' => '00'
    },
    '3' => {
        '1' => '81',
        '2' => '49',
        '3' => '31',
        '4' => '73',
        '5' => '55',
        '6' => '79',
        '7' => '14',
        '8' => '29',
        '9' => '93',
        '10' => '71',
        '11' => '40',
        '12' => '67',
        '13' => '53',
        '14' => '88',
        '15' => '30',
        '16' => '03',
        '17' => '49',
        '18' => '13',
        '19' => '36',
        '20' => '65'
    },
    '4' => {
        '1' => '52',
        '2' => '70',
        '3' => '95',
        '4' => '23',
        '5' => '04',
        '6' => '60',
        '7' => '11',
        '8' => '42',
        '9' => '69',
        '10' => '24',
        '11' => '68',
        '12' => '56',
        '13' => '01',
        '14' => '32',
        '15' => '56',
        '16' => '71',
        '17' => '37',
        '18' => '02',
        '19' => '36',
        '20' => '91'
    },
    '5' => {
        '1' => '22',
        '2' => '31',
        '3' => '16',
        '4' => '71',
        '5' => '51',
        '6' => '67',
        '7' => '63',
        '8' => '89',
        '9' => '41',
        '10' => '92',
        '11' => '36',
        '12' => '54',
        '13' => '22',
        '14' => '40',
        '15' => '40',
        '16' => '28',
        '17' => '66',
        '18' => '33',
        '19' => '13',
        '20' => '80'
    },
    '6' => {
        '1' => '24',
        '2' => '47',
        '3' => '32',
        '4' => '60',
        '5' => '99',
        '6' => '03',
        '7' => '45',
        '8' => '02',
        '9' => '44',
        '10' => '75',
        '11' => '33',
        '12' => '53',
        '13' => '78',
        '14' => '36',
        '15' => '84',
        '16' => '20',
        '17' => '35',
        '18' => '17',
        '19' => '12',
        '20' => '50'
    },
    '7' => {
        '1' => '32',
        '2' => '98',
        '3' => '81',
        '4' => '28',
        '5' => '64',
        '6' => '23',
        '7' => '67',
        '8' => '10',
        '9' => '26',
        '10' => '38',
        '11' => '40',
        '12' => '67',
        '13' => '59',
        '14' => '54',
        '15' => '70',
        '16' => '66',
        '17' => '18',
        '18' => '38',
        '19' => '64',
        '20' => '70'
    },
    '8' => {
        '1' => '67',
        '2' => '26',
        '3' => '20',
        '4' => '68',
        '5' => '02',
        '6' => '62',
        '7' => '12',
        '8' => '20',
        '9' => '95',
        '10' => '63',
        '11' => '94',
        '12' => '39',
        '13' => '63',
        '14' => '08',
        '15' => '40',
        '16' => '91',
        '17' => '66',
        '18' => '49',
        '19' => '94',
        '20' => '21'
    },
    '9' => {
        '1' => '24',
        '2' => '55',
        '3' => '58',
        '4' => '05',
        '5' => '66',
        '6' => '73',
        '7' => '99',
        '8' => '26',
        '9' => '97',
        '10' => '17',
        '11' => '78',
        '12' => '78',
        '13' => '96',
        '14' => '83',
        '15' => '14',
        '16' => '88',
        '17' => '34',
        '18' => '89',
        '19' => '63',
        '20' => '72'
    },
    '10' => {
        '1' => '21',
        '2' => '36',
        '3' => '23',
        '4' => '09',
        '5' => '75',
        '6' => '00',
        '7' => '76',
        '8' => '44',
        '9' => '20',
        '10' => '45',
        '11' => '35',
        '12' => '14',
        '13' => '00',
        '14' => '61',
        '15' => '33',
        '16' => '97',
        '17' => '34',
        '18' => '31',
        '19' => '33',
        '20' => '95'
    },
    '11' => {
        '1' => '78',
        '2' => '17',
        '3' => '53',
        '4' => '28',
        '5' => '22',
        '6' => '75',
        '7' => '31',
        '8' => '67',
        '9' => '15',
        '10' => '94',
        '11' => '03',
        '12' => '80',
        '13' => '04',
        '14' => '62',
        '15' => '16',
        '16' => '14',
        '17' => '09',
        '18' => '53',
        '19' => '56',
        '20' => '92'
    },
    '12' => {
        '1' => '16',
        '2' => '39',
        '3' => '05',
        '4' => '42',
        '5' => '96',
        '6' => '35',
        '7' => '31',
        '8' => '47',
        '9' => '55',
        '10' => '58',
        '11' => '88',
        '12' => '24',
        '13' => '00',
        '14' => '17',
        '15' => '54',
        '16' => '24',
        '17' => '36',
        '18' => '29',
        '19' => '85',
        '20' => '57'
    },
    '13' => {
        '1' => '86',
        '2' => '56',
        '3' => '00',
        '4' => '48',
        '5' => '35',
        '6' => '71',
        '7' => '89',
        '8' => '07',
        '9' => '05',
        '10' => '44',
        '11' => '44',
        '12' => '37',
        '13' => '44',
        '14' => '60',
        '15' => '21',
        '16' => '58',
        '17' => '51',
        '18' => '54',
        '19' => '17',
        '20' => '58'
    },
    '14' => {
        '1' => '19',
        '2' => '80',
        '3' => '81',
        '4' => '68',
        '5' => '05',
        '6' => '94',
        '7' => '47',
        '8' => '69',
        '9' => '28',
        '10' => '73',
        '11' => '92',
        '12' => '13',
        '13' => '86',
        '14' => '52',
        '15' => '17',
        '16' => '77',
        '17' => '04',
        '18' => '89',
        '19' => '55',
        '20' => '40'
    },
    '15' => {
        '1' => '04',
        '2' => '52',
        '3' => '08',
        '4' => '83',
        '5' => '97',
        '6' => '35',
        '7' => '99',
        '8' => '16',
        '9' => '07',
        '10' => '97',
        '11' => '57',
        '12' => '32',
        '13' => '16',
        '14' => '26',
        '15' => '26',
        '16' => '79',
        '17' => '33',
        '18' => '27',
        '19' => '98',
        '20' => '66'
    },
    '16' => {
        '1' => '88',
        '2' => '36',
        '3' => '68',
        '4' => '87',
        '5' => '57',
        '6' => '62',
        '7' => '20',
        '8' => '72',
        '9' => '03',
        '10' => '46',
        '11' => '33',
        '12' => '67',
        '13' => '46',
        '14' => '55',
        '15' => '12',
        '16' => '32',
        '17' => '63',
        '18' => '93',
        '19' => '53',
        '20' => '69'
    },
    '17' => {
        '1' => '04',
        '2' => '42',
        '3' => '16',
        '4' => '73',
        '5' => '38',
        '6' => '25',
        '7' => '39',
        '8' => '11',
        '9' => '24',
        '10' => '94',
        '11' => '72',
        '12' => '18',
        '13' => '08',
        '14' => '46',
        '15' => '29',
        '16' => '32',
        '17' => '40',
        '18' => '62',
        '19' => '76',
        '20' => '36'
    },
    '18' => {
        '1' => '20',
        '2' => '69',
        '3' => '36',
        '4' => '41',
        '5' => '72',
        '6' => '30',
        '7' => '23',
        '8' => '88',
        '9' => '34',
        '10' => '62',
        '11' => '99',
        '12' => '69',
        '13' => '82',
        '14' => '67',
        '15' => '59',
        '16' => '85',
        '17' => '74',
        '18' => '04',
        '19' => '36',
        '20' => '16'
    },
    '19' => {
        '1' => '20',
        '2' => '73',
        '3' => '35',
        '4' => '29',
        '5' => '78',
        '6' => '31',
        '7' => '90',
        '8' => '01',
        '9' => '74',
        '10' => '31',
        '11' => '49',
        '12' => '71',
        '13' => '48',
        '14' => '86',
        '15' => '81',
        '16' => '16',
        '17' => '23',
        '18' => '57',
        '19' => '05',
        '20' => '54'
    },
    '20' => {
        '1' => '01',
        '2' => '70',
        '3' => '54',
        '4' => '71',
        '5' => '83',
        '6' => '51',
        '7' => '54',
        '8' => '69',
        '9' => '16',
        '10' => '92',
        '11' => '33',
        '12' => '48',
        '13' => '61',
        '14' => '43',
        '15' => '52',
        '16' => '01',
        '17' => '89',
        '18' => '19',
        '19' => '67',
        '20' => '48'
        }
}

l1 = 1
l2 = 2
l3 = 3
l4 = 4

c1 = 1
c2 = 2
c3 = 3
c4 = 4

sumsArray = []

while l4 != 21 do
    sum = data[l1.to_s][c1.to_s].to_i*data[l2.to_s][c2.to_s].to_i*data[l3.to_s][c3.to_s].to_i*data[l4.to_s][c4.to_s].to_i
    sumsArray.push(sum)
    if c4 == 20
        l1 += 1
        l2 += 1
        l3 += 1
        l4 += 1
    end
    if c4 == 20
        c1 = 1
        c2 = 2
        c3 = 3
        c4 = 4
    end
    if c4 < 20
        c1 += 1
        c2 += 1
        c3 += 1
        c4 += 1
    end
end

puts sumsArray.max
